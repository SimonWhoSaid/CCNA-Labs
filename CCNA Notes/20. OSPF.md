# OSPF

## OSPF Characteristics
- OSPF is a link state routing protocol
- It supports large networks
- It has very fast convergence time
- MEssages are sent using Multicast
- OSPF is an open standard protocol
- Uses an alogrithm to determine the best path to learned networks

## OSPF vs EIGRP vs RIP
- RIP has scalability limitations so it is not typically used in production netowrks
- Most companies use EIGRP or OSPF for their IGP
- OSPF is the most commonly used
- OSPF has lots of documentation and is an open standard
- EIGRP can be simpler to implement and troubleshoot

## Link State Routing Protocols
- In link state routing protocols, each router describes itself and its interfaces to its directly connected neighbours
- This information is passed unchanged from one router to another
- Every router learns the full picture of the network including every router, its interfaces and what they connect to
- OSPF routers use Link State Advertisements (LSA) to pass on routing updates

## OSPF Operations
1. Discover neighbours
2. Form Adjancies
3. Flood Link State Database (LSDB)
4. Compute Shortest Path
5. Install Best Routes in Routing Table
6. Respond to Network Changes

## OSPF Packet Types
- Hello Packets: A router will send out and listen for hello packets when OSPF is enabled on an interface, and form adjancencies with other OSPF rouers on the link
- Database Description (DBD): Then when the router forms an adjancency, adjacent routers will tell each other the networks they know about with the DBD packet
- Link State Request (LSR): If a router is missing information about any of the networks in the received DBD, it will send the neighbour an Link State Request
- Link State Advertisement (LSA): A routing update
- Link State Update (LSU): Contains a list of LSA's which should be updated, used during flooding
- LSAck: Receiving routers acknowledge LSAs

## OSPF Configuration - Process ID
- Must be in global config. _router OSPF 1_
  - The 1 represents the process ID
- Different interfaces on a router can run in different instances of OSPF
- Different instances have different LSDB
- Only one instance is typically configured on OSPF routers - multiple process IDs are very rarely used
- The process ID is locally significant. It does not have to match on the neighbour router to form an adjacency.
  - <img width="898" height="280" alt="image" src="https://github.com/user-attachments/assets/75f5ac23-cdcd-4de6-a4cf-6c2e2c448376" />
  - R2 will still form adjancies with R1 and R3. R1 and R2 will not learn about each other because of different Process IDs

## OSPF Configuration - Network
- Must be in global configuration. _router OSPF 1_ _network 10.0.0.0 0.0.255.255 area 0_
- The network command uses a wildcard mask
- The command does not default to using the classful boundary, you must enter a wildcard mask
- The network command explanation
  - Look for interfaces with an IP address which falls within this wildcard mask
  - Enable OSPF on those interfaces which means - Send out and listen for OSPF hello messages and peerf with adjacent OSPF routers
  - Advertise the network and mask which is configured on those interfaces
  - One thing to note is that wildcard does not target the subnet mask it is pointing to.
    - 0.0.0.255 Wilcard mask will not target a /24 subnet.

## OSPF Verification
_Sh Run | section OSPF_
- This will display the ospf command in the running config

_Show ip ospf interace brief_
- Interace that has OSPF, PID, Area, IP Address/Mask, Cost, State, Neighbors

_Show IP ospf neighbor_
- Shows neighbors attached to the router

_Show IP ospf database_
- Shows links in the area and ths OSPF network

_Show IP Route_
- Double check if you have OSPF routes in the routing table

# OSPF Advanced Topics

## OSPF Router ID
- OSPF Routers identify themselves using an OSPF Router ID which is in the form of an IP address
- This will default to being the highest IP address of any loopback interfaces configured on the router, or the highest other IP address if a loopback does not exist
- Loopback interfaces never go down so the Router ID will nto change
- You can also manually specif the Router ID
- best practice is to use a loopback or manaully set the Router ID
