# Campus LAN Design - Core, Distribution, and Access Layers

- The campus LAN should be designed for scalability, performance, and security
- To aid in a best practice design process, the network topology is split into **Access, Distribution, and Core layers**

In the three tiered architecture we have traffic flows that work from "North to South"

<img width="1071" height="509" alt="image" src="https://github.com/user-attachments/assets/a6de0558-2580-4a27-9206-2b4a2a4ee239" />


### Access Layer
- This is where the end host plugs into. Usually into "Access Switches".
- The access layer is designed to have a high port count at an affordable cost.
- Desktops typically have only one NIC so they connect into one switch or WAP
- Servers will often have dual NICs and connect to a a pair of redundant switches
- Client access security measures are enabled at the access layer
- Access Layer Switches do not connect to each other

### Distribution Layer
- Distribution is in between the core and access layers
- Distribution layer switches server as an aggregation point for the access layer and provide scalability
- Distribution layer switches are typically deployed in redundant pairs, with downstream Access Layer switches connected to both
- End hosts are not typically connected here
- Most software policy such as QoS is enabled at the distribution layer

### Core Layer
- Core Layer switches may be only in one building and link all of the buildings together
- Core Layer switches are typically deployed in redundant pairs, with downstream distribution layer switches connected to both
- Traffic between different parts of the campus travels through the core so is designed for speed and resiliency
- Software policy slows the switch down so it should be avoided in the Core Layer

### Collapsed Distribution and Core Architecture
- Used on smaller campuses that do not need the scalability of three separate layers.
- A Collapsed Distribution and Core, the two layers are combined on the same hardware device.

<img width="780" height="450" alt="image" src="https://github.com/user-attachments/assets/0aa19b9c-e480-47ef-9661-adb84fdc4089" />


# Spine-Leaf Network Design

Traffic flows from "East to West"

- Designed for better scalability and better for east and west traffic flows, because you can always add more "Spine Switches" and "Leaf Switches"
- Servers are connected to the Tier 1 "Leaf Switches" then those switches connect to the "Spine Switches" in mesh topology

<img width="963" height="380" alt="image" src="https://github.com/user-attachments/assets/759bd369-b853-4af0-a924-4b9a85dc105d" />


# Why We Have VLANs

## Router Operations
- Routers operate at Layer 3 the network layer
- Hosts in separate IP subnets must send traffic through a router in order to communicate
- Security rule son routers or firewalls can be used to easily control what traffic is allowed between different IP subnets at Layer 3
- Routers do not forward broadcast traffic by default
- They provide performance and security by splitting networks into smaller domains at Layer 3

## Switch Operations
- Switches operate at Layer 2 the data-link layer
- Switches do forward broadcast traffic by default
- By default a campus switched network is one large broadcast domain
- Switches flood braodcast traffic everywhere, including between different IP subnets and this raises concern for performance and security.


Example LAN
<img width="1045" height="494" alt="image" src="https://github.com/user-attachments/assets/18ac07b5-3e03-4644-ad85-9df67582f3fb" />

- Unicast Traffic sent from PC1 to PC2 will go from PC1 to the switch and to PC2
- Unicast between different IP subnets. PC2 wants to send traffic to ENG PC1. The Switch then sends traffic to the Router, the Router will send the traffic back down to the subnet that it is connected to on the switch, then the switch will send it over to the PC
- <img width="1057" height="580" alt="image" src="https://github.com/user-attachments/assets/1580a442-099d-4c88-8e6c-e87d5bfa4200" />

## Broadcast Traffic.
- If a PC makes an ARP request, the switch will flood all the traffic to every port (except for the port that made the request)
- This a problem because the traffic bypasses router or firewall layer 3 security policies
- It affects performance because every end host has to process the traffic
- It also affects performane by using bandwidth on links where the traffic is not required

## VLANs - Virtual Local Area Networks
- VLANs combat the broadcast address problem because we can segment the LAN into separate broadcast domains at layer 2
- This helps us increase performance and security in the LAN
- Switches will only allow traffic within the same VLAN
- So when a VLAN is giving out broadcast traffic it will only flood ports that are assigned to that VLAN instead of all of the ports associated to that switch. This helps with security and performance.
<img width="1047" height="485" alt="image" src="https://github.com/user-attachments/assets/bef7843e-84b0-4c91-bc4d-5e24d9632156" />

# VLAN Access Ports
- VLAN access ports are configured on siwtch interfaces where end hosts are plugged in
- Access ports are configured with one specific VLAN
- The configuration is all on the switch, the end host is not VLAN aware
- Switches only allow traffic within the same VLAN

## Default VLAN - VLAN1
- All ports are in VLAN 1 by default
- We need to create the VLANs to separate the broadcast domains
- Here is our topology again.
- <img width="1047" height="485" alt="image" src="https://github.com/user-attachments/assets/bef7843e-84b0-4c91-bc4d-5e24d9632156" />

- We will be creating the Engineering VLAN first.
  - In global config we will enter our VLAN Number which will be _vlan 10_
  - Then we will name it in the (config-vlan)# _name Engineering_
  - Then we will enter interface mode of the interface we want to configure. _Interface F0/1_
  - Then _switchport mode access_ to make it an access port
  - _switchport access vlan 10_
  - Drop back down to global config and use _Interface range FastEthernet 0/3 - 5_ This will cover the whole range of ports
  - We will now be in interface mode _Switchport mode access_
  - _Switchport access vlan 10_
 
- Sales VLAN
  - While in global config _Vlan 20_
  - (config-vlan)# _name Sales_
  - (config)#_Interface f0/2_
  - (config-if)#_switchport mode access_
  - (config-if)#_switchport access vlan 20_
  - (config)#_interface range FastEthernet 0/6 - 7_
  - (config-if)#_switchport mode access_
  - (config-if)#_switchport access vlan20_
 
- Then to verify everything use _show vlan brief_
- To verify a single port we do _show interface f0/0 switchport_ in privileged exec mode
