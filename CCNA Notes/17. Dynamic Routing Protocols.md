# Dynamic Routing Protocols vs Static Routes


# Network Topology

<img width="800" height="112" alt="image" src="https://github.com/user-attachments/assets/10f3d866-57b7-4c1b-bbc4-cc155122a426" />

## Dynamic Routing Protocols

- When a routing protocol is used, routers automatically advertise their best paths to known networks to each other
- After the router has automatically advertise itself, and it learns the routes that were advertise from the other router
  - "You can get to these networks through me"
- Routers use this infomration to determine their own best path to the known destinations
- When the state of the network changes, such as a link going down or a new subnet being added, the routers update each other
- Routers will automatically calculate a new best path and update the routing table if the network changes

## Dynamic Summary Routes

- Summary routes lead to less memory usage in routers
- They also lead to less CPU usage as changes in the network only affect other routers in the same area
  - For Example, if the link on R1 to the the 10.0.1.1/24 network goes down, R2 will lose its route there and try to compute a new path
  - R3 will not be affected as its summary route to 10.0.0.0/16 is unchanged
 
## Dynamic Routing Protocols Advantages

- Routing protocols are more scalable than administrator defined static routes
- In dynamic routing, routers automatically advertise available sunbnets to each other without the administrator having to manually enter every route on every router
- If a subnet is added or remvoed the routers will automatically discover that and update their routing tables
- If the best path to a subnet goes down routers automatically discover that and will calculate a new best path if one is available.
- The routers automatically advertise available subnets to each other without the admin having to m anually enter every route on every router
- If a subnet is added or removed the routers will automatically discover that and update their routing tables.
- If the best path to a subnet goes down routers automatically discover that and will calculate a new best path if one is available
- Using a combination of dynamic routing protocol and static routes is very common in real world environments
- In this case the routing protocol will be used to carry the bulk of the network information
- Static routes can also be used on an as needed basis, for example backup purposes or for a static route to the internet

# Routing Protocols Types

- Routing protocols can be split into two main types:
  - Interior Gateway Protocols (IGP)
  - Exterior Gateway Protocols (EGP)
- Interior gateway protocols are used for routing within an organization
- Exterior gateway protocols are used for routing between organizations over the internet
  - The only EGP in use today is Border Gateway Protocol (BGP)
 
- IGPs
  - Distance Vector Routing Protocols
    - Measures the distance by the number of routers (hops) a packet has to pass
    - Distance vector always looks for the shortest number of hops to take
    - In distance vector protocols, each router sends it **directly connected neighbors** a list of all its known networks along with its own distance to each of those networks
    - Distance vector routing protocols do not advertise the entire network topology
    - A router only knows its directly connected neighbors and the lists of networks those neighbors have advertised. It doesn't have detailed topology information beyond its directly connected neighbors
  - Link State Routing Protocols
    - Link State Routing Protocols considers multiple routes with the best speeds
    - With this protocol each router describes itself and its interfaces to its **directly connected neighbors**
    - This information is passed unchanged from one route to another
    - Every router learns the full picture of the network including every router, its interfaces, and what they connect to.
    - Link state routing does put more load on the router because it has more information stored in the protocol.
  - Both Distance Vector and Link State Protocols communicate to its directly connected neighbors it does not broadcast outside. So in our network topology at the top, R1 and R3 do not communicate with each other.
  - All IGPs do the same job, which is to advertise routes within an organization and determine the best path or paths to the different networks
  - Using more than 1 IGPs should be avoided if possible
 

## Command Line

To check which IP protocol your router is running use the command _show ip protocols_ or _sow run | section rip_

# Chart of Dynamic Routing Protocols

<img width="1033" height="409" alt="image" src="https://github.com/user-attachments/assets/f6bb4cd4-39d4-409d-8a12-7dbe657d3ec3" />


# Routing Protocol Metrics

A Router may receive multiple possible paths to get to a destination network. Only the best path will make it into the routing table and be used. The different IGPs use different methods to calculate the best path to a destination network.

Each possible path will be assigned a 'metric' value by the routing protocol which indicates how preferred the path is, in metrics the lowest metric value is preferred. So high numbers are bad.

- Distance Vector routers advertise to each other the networks they know about, and their metric to get to each of them
- Link State routers advertise all the links in their area of the network to each other
- Each router will take this information and then make an independent calculation of its own best path to get to each destination
- If the best path to a destination is lost, such as a link going down, it will be removed from the routing table and replaced with the next best route

## RIP Metric
- RIP, Routing Information Protocol, always uses Hop Count as the metric.
- The maximum hop count by default is 15, paths which are more than 15 hops away are marked as unreachable
- RIP is typically used only in small or test environments

## OSPF Metric
- OSPF uses the 'cost' metric.
- OSPF calculates the most efficient path for traffic to be sent with the best speeds.
- OSPF is Link State protocol
- Open standard which is supported by all vendors's routers and is the most commonly deplayed IGP today.
- More complicated to maintain than EIGRP

## IS-IS Metric
- IS-IS also uses 'cost' metric, but it is not automatically derived from interface badnwidth. All links have an equal cost by default
- You can manually configure the cost of links if you want to manipulate the path
- If you do not manually set the link costs then the path with the lowest hop count will be used
- Needs to be manually configured or it will use hop count to determine the best path.
- It is typically only used in Service Provider networks or large organizations with their own MPLS network who choose it because of its scalability

## EIGRP
- Uses the bandwidth and delay of links to calculate the metric
- Load and reliability can also be considere but are ignored by default
- A fixed delay value is used based on the interface bandwidth, the protocol does not dynamically measure current delay
- You can manually configure the delay of links if you want to manipulate the path
- It will typically choose the route with the best bandwidth
- Simple to maintain, calcualtes changes very quickly and its metric calculation will normally choose the best path by default. Cisco Proprietary technology
- EIGRP combines the fast speeds of Link State and the easy setup of a Distance Vector protocol

# Equal Cost Multi Path (ECMP)
- If multiple paths to a desintation have an equal metric, the router will enter all of the paths into the routing table
- ECMP will load balance the outbound traffic to the destination over the different paths
- ALL IGP routing protocols will perform ECMP by default
- EIGRP is the only routing protocol which is capable of UnEqual Cost Multi Path. It must be manually configured to support this

# Administrative Distance
Adminsitrative Distance is a measure of how trusted the routing protocol is. If routes to the same destination are received via different routing protocls, the protcol with the best AD wins.
Routers use AD to choose the best path when multiple protocls provide routes to the same destination, as the route with lowest AD is preferred.

## Metric
- A router will typically only learn routes to a particular destination from a single routing protocol
- When multiple routes to a destination are learned through a rotuing protocol, the router will install the path or paths with the best metric into the routing table
- Different routing protocols use different methods to calculate the metric such as 'hops' or 'cost'

<img width="580" height="436" alt="image" src="https://github.com/user-attachments/assets/ad45800e-ddf0-4a56-82fc-50ba67ab2bcb" />

## Adminstrative Distance and Metric
- Administrative Distance is used to choose between multiple paths learned via different routing protocols
- Metric is used to choose between multiple paths learned via the same protocol
- The Administrative Distance is considered first to narrow the choice down to the single best routing protocol
- The metric is _then_ considered to choose the best path or paths which make it into the routing table
- When paths to the same destination are received from multiple routing protocols, the AD is considered first.
  - OSPF has a better AD than RIP so the RIP routes will be discarded
  - The router will then compare the routes received via OSPF and install the one with lowest cost in the routing table
  - IF multiple equal cost paths are received via OSPF they will all be installed in the routing table and the router will load balance outbound traffic to the destination between them.

## Floating Static Routes
- If the best path to a destination is lost it will be removed from the routing table and replaced with the next best route
- We might want to configure a static route as a backup for the route learned via a routing protocol
- A problem is that static routes have a default AD of 1 which will always be preferred over routers learned via an IGP
- We can change the AD value of a static route and give it a higher AD value of the protocol we prefer.
- In this example we give the static route an AD value of 115
  - _ip route 10.0.1.0 255.255.255.0 10.1.3.2 115_
  
