## DNS

The function of a DNS is to resolve a FQDN (Full Qualified Domain Name) into an IP Address
- In example, Google.com -> 8.8.8.8
- The DNS port is UDP 53

### Cisco Router DNS Commands

### DNS Client for a Router

- ip domain-lookup
- ip name-server (IP Address of DNS)
- ip domain-name (Primary Domain Name)
- ip domain-list (Additional DNS Suffixes)

### DNS Server Commands for Routers
- ip DNS server
     - This configures a router as a server
- ip host (Hostname + IP Address)
     - Adding end devices to the DNS server
- Routers are not typically DNS servers

## ARP

Address Resolution Protocol

- Used to map the IP address to the MAC address
- Sender needs to know the receivers IP address and MAC to form a packet
- ARP request is a **layer 2** broadcast
    - In searching for an IP address it is also asking for its MAC address
    - Broadcast MAC address FFF.FFF.FFF
- ARP replies are saved in a hosts ARP cache so it doesn't need to send an ARP request every time it wants to communicate

Windows ARP Commands
- View the ARP cache: arp -a
- Clear ARP cache: netsh interface ip delete arpcache

Linux ARP Commands
- View ARP cache: arp -n
- Clear ARP cache: ip -s -s neigh flush all


Down below is how an ARP request works with devices on the same subnet

<img width="1073" height="443" alt="image" src="https://github.com/user-attachments/assets/2d009873-a73a-4da5-b1d4-dd424d422ac3" />


## ARP for _Routed_ Traffic

When the sender and receiver are on different IP subnets, the traffic must be forwarded by a router

- The ARP request do not get forwarded out by the router, because routers do not forward broadcast addresses
- The sender knows not to make an ARP request for an IP address on a different subnet because it compares its own IP address and subnet mask with the destination IP address and it can see that it is on a different subnet
- The sender knows it has to send the traffic through a router, it instead sends an ARP request to its default gateway.
- The ARP request will be sent out to the default gateway and it will reply back with its MAC address
- Once the sender receives the reply back from the default gateway it will send over the IP packet to be forwarded to the default gateway to route the traffic to a different subnet. The IP packet contains the Source IP and Destination IP. But it has the source MAC address and the destiantion MAC is the default gateway
- The router will send over the IP packet and hold on to it, then the router will send out a ARP request with the destination IP address.
- The device with the destination IP address will reply back with it's IP address and MAC address.
- Then the router will finally send over the whole IP packet, of the destination IP and MAC address
- The MAC address changes at every router hop, the source and destination IP always stays the same


